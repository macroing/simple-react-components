"use client";
import{useRef as e,useState as t,useEffect as n}from"react";import i from"./ContextMenu.module.css.js";import{jsx as r,jsxs as s,Fragment as c}from"react/jsx-runtime";function l(l){const a=l.isVisible,o=l.items,m=l.setIsVisible,h=l.styles||i,u=l.x,d=l.y,p=e({}),[f,x]=t("");return n((()=>{x(""),p.current={}}),[o]),a?r("div",{className:h.context_menu_container,onClick:e=>{m(!1),x("")},children:r("ul",{className:h.context_menu,onClick:e=>e.stopPropagation(),ref:e=>p.current[""]=e,style:{left:u+"px",top:d+"px"},children:function e(t,n=""){return t.map(((t,i)=>s("li",{children:[t.items&&t.items.length>0&&s(c,{children:[s("button",{className:f.startsWith(n+i)?h.button_selected:void 0,onClick:e=>x(f.startsWith(n+i)?n:n+i),children:[r("span",{children:t.text}),r("span",{"aria-hidden":!0,className:"fa fa-chevron-right"})]}),r("ul",{className:h.context_menu,ref:e=>p.current[n+i]=e,style:{display:f.startsWith(n+i)?"flex":"none",left:p.current[n]?Math.ceil(p.current[n].getBoundingClientRect().right-p.current[n].getBoundingClientRect().left)-11+"px":"0px",top:"-10px"},children:e(t.items,n+i)})]}),(!t.items||0===t.items.length)&&t.href&&s("a",{href:t.href,children:[r("span",{children:t.text}),t.icon&&r("span",{className:t.icon})]}),(!t.items||0===t.items.length)&&!t.href&&s("button",{children:[r("span",{children:t.text}),t.icon&&r("span",{className:t.icon})]})]},n+i)))}(o)})}):null}export{l as default};
